# bybit-stream

[Документация на API Bybit v5](https://bybit-exchange.github.io/docs/v5/intro)

## Предметная область

анализ криптовалютных данных на бирже Bybit (веб-сокет `wss://stream.bybit.com/v5/public/spot`)

## Какие данные для этой области являются потоковыми?

Bybit предоставляет публичные потоки данных через WebSocket API v5. К основным потоковым данным относятся:

* **Orderbook (Depth)** — изменения стакана заявок в реальном времени.
* **Trades** — сделки, совершённые на бирже.
* **Kline (Candlestick)** — данные о свечах за выбранные интервалы.

### Пример сообщения `publicTrade`

```json
{
    "topic": "publicTrade.BTCUSDT",
    "type": "snapshot",
    "ts": 1672304486868,
    "data": [
        {
            "T": 1672304486865,
            "s": "BTCUSDT",
            "S": "Buy",
            "v": "0.001",
            "p": "16578.50",
            "L": "PlusTick",
            "i": "20f43950-d8dd-5b31-9112-a178eb6023af",
            "BT": false
        }
    ]
}
```
Где:
- `T`: время сделки (timestamp)
- `s`: торговая пара
- `S`: направление сделки (Buy/Sell)
- `v`: объём сделки
- `p`: цена сделки
- `L`: тип изменения цены
- `i`: уникальный ID сделки
- `BT`: признак block trade


## Какие результаты мы хотим получить в результате обработки?

* Расчет средней цены по сделаками.

## Как в процессе обработки можно задействовать машинное обучение?

* Предсказание краткосрочных ценовых движений (например, с помощью LSTM, XGBoost).
* Классификация рыночных состояний (волатильный / стабильный рынок).
* Автоматическое выявление паттернов технического анализа.

## Как предметная область относится к запаздыванию обработки? Насколько это критично?

Запаздывание критично:

* В реальной торговле даже задержка менее 10 мс может повлиять на результат.
* Для целей анализа и мониторинга задержка в 100-250 мс считается допустимой.

## Как предметная область относится к потере данных? Насколько это критично? Какую семантику следует выбрать?

Потеря данных крайне критична, особенно для сделок и стакана:

* Пропуск сделки может изменить картину рынка.
* Рекомендуемая семантика: **не более одного раза** (at-most-once), чтобы минимизировать дубликаты и обеспечить целостность анализа.

## Почему выбран `wss://stream.bybit.com/v5/public/spot`

* Bybit v5 является актуальной и стабильной версией API.
* Public Spot stream не требует авторизации и легко доступен.
* Поток прост для анализа: содержит основные параметры сделки (символ, цена, объём, направление).
* Подходит для учебных проектов, так как минимален по требованиям и имеет меньшие ограничения по rate limits.
* Даёт возможность легко расширить задачи (например, подключить orderbook или kline).
